// ========== Tour Data ==========
const tourData = [
  {
    id: 1,
    image: '../../assets/img/home-img-1.png',
    title: 'Angkor Wat, Siem Reap - 5 Days 4 Nights',
    desc: 'Teuk Thla, Toul Kork, Phnom Penh',
    location: 'Siem Reap, Cambodia',
    price: 99.99,
    oldPrice: 129.99,
    views: 213,
    stars: 5,
    duration: '5 Days',
    maxGuests: 20,
    ageLimit: '12+',
    transport: 'Bus from Phnom Penh',
    gallery: [
      '../../assets/img/tour-galary-1.jpg',
      '../../assets/img/tour-galary-2.jpg',
      '../../assets/img/tour-galary-3.jpg'
    ],
    overview: `
      <p class="mb-5 leading-7 text-justify">
        Discover the majestic Angkor Wat, Cambodia’s ancient wonder. This 5-day, 4-night tour brings you face-to-face with breathtaking temples, rich culture, and unforgettable history.
      </p>
      <p class="mb-5 leading-7 text-justify">
        Explore the temple complex with expert guides, enjoy local cuisine, and relax in comfortable accommodations throughout your stay in Siem Reap.
      </p>
    `,
    include: [
      'Daily breakfast, lunch, and dinner',
      'English-speaking tour guide',
      'All entrance fees',
      'Transport from/to Phnom Penh',
      'Hotel accommodation'
    ],
    exclude: [
      'Personal expenses',
      'Tips for guide/driver',
      'Drinks and snacks',
      'Travel insurance'
    ],
    plan: [
      'Arrival in Siem Reap → Hotel check-in → Welcome dinner',
      'Full-day temple tour (Angkor Wat, Bayon, Ta Prohm)',
      'Floating village visit → Cultural show in the evening',
      'Leisure day or optional bike tour',
      'Return to Phnom Penh'
    ],
    mapLink: 'https://www.google.com/maps/embed?...'
  },

  {
    id: 2,
    image: '../../assets/img/home-img-1.png',
    title: 'Angkor Wat, Siem Reap - 5 Days 4 Nights',
    desc: 'Teuk Thla, Toul Kork, Phnom Penh',
    location: 'Siem Reap, Cambodia',
    price: 99.99,
    oldPrice: 129.99,
    views: 213,
    stars: 5,
    duration: '5 Days',
    maxGuests: 20,
    ageLimit: '12+',
    transport: 'Bus from Phnom Penh',
    gallery: [
      '../../assets/img/tour-galary-1.jpg',
      '../../assets/img/tour-galary-2.jpg',
      '../../assets/img/tour-galary-3.jpg'
    ],
    overview: `
      <p class="mb-5 leading-7 text-justify">
        Discover the majestic Angkor Wat, Cambodia’s ancient wonder. This 5-day, 4-night tour brings you face-to-face with breathtaking temples, rich culture, and unforgettable history.
      </p>
      <p class="mb-5 leading-7 text-justify">
        Explore the temple complex with expert guides, enjoy local cuisine, and relax in comfortable accommodations throughout your stay in Siem Reap.
      </p>
    `,
    include: [
      'Daily breakfast, lunch, and dinner',
      'English-speaking tour guide',
      'All entrance fees',
      'Transport from/to Phnom Penh',
      'Hotel accommodation'
    ],
    exclude: [
      'Personal expenses',
      'Tips for guide/driver',
      'Drinks and snacks',
      'Travel insurance'
    ],
    plan: [
      'Arrival in Siem Reap → Hotel check-in → Welcome dinner',
      'Full-day temple tour (Angkor Wat, Bayon, Ta Prohm)',
      'Floating village visit → Cultural show in the evening',
      'Leisure day or optional bike tour',
      'Return to Phnom Penh'
    ],
    mapLink: 'https://www.google.com/maps/embed?...'
  },

  {
    id: 3,
    image: '../../assets/img/home-img-1.png',
    title: 'Angkor Wat, Siem Reap - 5 Days 4 Nights',
    desc: 'Teuk Thla, Toul Kork, Phnom Penh',
    location: 'Siem Reap, Cambodia',
    price: 99.99,
    oldPrice: 129.99,
    views: 213,
    stars: 5,
    duration: '5 Days',
    maxGuests: 20,
    ageLimit: '12+',
    transport: 'Bus from Phnom Penh',
    gallery: [
      '../../assets/img/tour-galary-1.jpg',
      '../../assets/img/tour-galary-2.jpg',
      '../../assets/img/tour-galary-3.jpg'
    ],
    overview: `
      <p class="mb-5 leading-7 text-justify">
        Discover the majestic Angkor Wat, Cambodia’s ancient wonder. This 5-day, 4-night tour brings you face-to-face with breathtaking temples, rich culture, and unforgettable history.
      </p>
      <p class="mb-5 leading-7 text-justify">
        Explore the temple complex with expert guides, enjoy local cuisine, and relax in comfortable accommodations throughout your stay in Siem Reap.
      </p>
    `,
    include: [
      'Daily breakfast, lunch, and dinner',
      'English-speaking tour guide',
      'All entrance fees',
      'Transport from/to Phnom Penh',
      'Hotel accommodation'
    ],
    exclude: [
      'Personal expenses',
      'Tips for guide/driver',
      'Drinks and snacks',
      'Travel insurance'
    ],
    plan: [
      'Arrival in Siem Reap → Hotel check-in → Welcome dinner',
      'Full-day temple tour (Angkor Wat, Bayon, Ta Prohm)',
      'Floating village visit → Cultural show in the evening',
      'Leisure day or optional bike tour',
      'Return to Phnom Penh'
    ],
    mapLink: 'https://www.google.com/maps/embed?...'
  },

  {
    id: 4,
    image: '../../assets/img/home-img-1.png',
    title: 'Angkor Wat, Siem Reap - 5 Days 4 Nights',
    desc: 'Teuk Thla, Toul Kork, Phnom Penh',
    location: 'Siem Reap, Cambodia',
    price: 99.99,
    oldPrice: 129.99,
    views: 213,
    stars: 5,
    duration: '5 Days',
    maxGuests: 20,
    ageLimit: '12+',
    transport: 'Bus from Phnom Penh',
    gallery: [
      '../../assets/img/tour-galary-1.jpg',
      '../../assets/img/tour-galary-2.jpg',
      '../../assets/img/tour-galary-3.jpg'
    ],
    overview: `
      <p class="mb-5 leading-7 text-justify">
        Discover the majestic Angkor Wat, Cambodia’s ancient wonder. This 5-day, 4-night tour brings you face-to-face with breathtaking temples, rich culture, and unforgettable history.
      </p>
      <p class="mb-5 leading-7 text-justify">
        Explore the temple complex with expert guides, enjoy local cuisine, and relax in comfortable accommodations throughout your stay in Siem Reap.
      </p>
    `,
    include: [
      'Daily breakfast, lunch, and dinner',
      'English-speaking tour guide',
      'All entrance fees',
      'Transport from/to Phnom Penh',
      'Hotel accommodation'
    ],
    exclude: [
      'Personal expenses',
      'Tips for guide/driver',
      'Drinks and snacks',
      'Travel insurance'
    ],
    plan: [
      'Arrival in Siem Reap → Hotel check-in → Welcome dinner',
      'Full-day temple tour (Angkor Wat, Bayon, Ta Prohm)',
      'Floating village visit → Cultural show in the evening',
      'Leisure day or optional bike tour',
      'Return to Phnom Penh'
    ],
    mapLink: 'https://www.google.com/maps/embed?...'
  }
];

// ========= UTILS =========
function getQueryParam(param) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(param);
}

function createStarsHTML(count) {
  return Array(count).fill('<i class="fa-solid fa-star text-yellow-300"></i>').join("");
}

// ========= RENDER FUNCTION =========
function renderTourDetail() {
  const id = parseInt(getQueryParam("id"));

  if (!id) return alert("No tour selected!");

  const tour = tourData.find((t) => t.id === id);
  if (!tour) return alert("Tour not found!");

  // Update main heading
  document.querySelector("main h1").textContent = tour.title;

  // Replace tour info
  const infoSection = document.querySelector("main > section.bg-gray-100 > div.max-w-screen-xl");
  infoSection.innerHTML = `
    <div class="flex items-center gap-10 my-10">
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-location-dot text-ascent"></i>
        <p>${tour.location}</p>
      </div>
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-eye text-ascent"></i>
        <p>${tour.views}</p>
      </div>
      <div>${createStarsHTML(tour.stars)}</div>
      <i class="fa-regular fa-heart text-red-500"></i>
    </div>

    <div class="flex gap-10 my-10">
      ${tour.gallery.map(src => `<img class="w-100 rounded" src="${src}" alt="gallery" />`).join("")}
    </div>

    <div class="flex items-center gap-25 mt-10">
      <div><div class="flex gap-3 items-center mt-5"><i class="fa-solid fa-calendar text-primary text-3xl"></i><h3>Duration</h3></div><p class="ml-10 mt-3">${tour.duration}</p></div>
      <div><div class="flex gap-3 items-center mt-5"><i class="fa-solid fa-users-viewfinder text-primary text-3xl"></i><h3>Max Guests</h3></div><p class="ml-13 mt-3">${tour.maxGuests}</p></div>
      <div><div class="flex gap-3 items-center mt-5"><i class="fa-solid fa-users-rays text-primary text-3xl"></i><h3>Age Limit</h3></div><p class="ml-13 mt-3">${tour.ageLimit}</p></div>
      <div><div class="flex gap-3 items-center mt-5"><i class="fa-solid fa-bus text-primary text-3xl"></i><h3>Transport</h3></div><p class="ml-12 mt-3">${tour.transport}</p></div>
    </div>`;

  // Overview
  document.querySelector("section.max-w-screen-xl > div.mb-10 > article").innerHTML = `
    <h2 class="text-3xl font-bold mb-5 text-primary">Overview</h2>
    ${tour.overview}
  `;

  // Include/Exclude
  const includeExclude = document.querySelectorAll("section.max-w-screen-xl > div.mb-10")[1];
  includeExclude.innerHTML = `
    <h2 class="text-3xl font-bold mb-5 text-primary">What's Included / Excluded</h2>
    <div class="grid grid-cols-1 gap-10">
      <div><h3 class="text-xl font-semibold text-primary mb-3">Included</h3><ul class="list-disc ml-6 leading-8 text-justify">${tour.include.map(i => `<li>${i}</li>`).join("")}</ul></div>
      <div><h3 class="text-xl font-semibold text-primary mb-3">Excluded</h3><ul class="list-disc ml-6 leading-8 text-justify">${tour.exclude.map(i => `<li>${i}</li>`).join("")}</ul></div>
    </div>`;

  // Plan
  const planSection = document.querySelectorAll("section.max-w-screen-xl > div.mb-10")[2];
  planSection.innerHTML = `
    <h2 class="text-3xl font-bold mb-5 text-primary">Tour Plan</h2>
    <ul class="list-decimal ml-6 leading-9 text-justify">
      ${tour.plan.map((d, i) => `<li><strong>Day ${i + 1}:</strong> ${d}</li>`).join("")}
    </ul>`;

  // Map
  document.querySelector("section.max-w-screen-xl > div.mb-20").innerHTML = `
    <h2 class="text-3xl font-bold mb-5 text-primary">Map</h2>
    <iframe src="${tour.mapLink}" width="600" height="450" style="border:0" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  `;

  // Prices in booking form
  document.querySelector("form#bookingForm h2").textContent = `$${tour.price.toFixed(2)}`;
  document.querySelector("form#bookingForm h3").textContent = `$${tour.oldPrice.toFixed(2)}`;
}

// Run on load
window.addEventListener("DOMContentLoaded", renderTourDetail);
